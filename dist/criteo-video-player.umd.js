(function(S,E){typeof exports=="object"&&typeof module<"u"?E(exports):typeof define=="function"&&define.amd?define(["exports"],E):(S=typeof globalThis<"u"?globalThis:S||self,E(S["criteo-video-player"]={}))})(this,function(S){"use strict";var zt=Object.defineProperty;var Zt=(S,E,N)=>E in S?zt(S,E,{enumerable:!0,configurable:!0,writable:!0,value:N}):S[E]=N;var q=(S,E,N)=>Zt(S,typeof E!="symbol"?E+"":E,N);function E(t){if(t===void 0)return;const e=t.slice(0,5);return e!="https"&&e.slice(0,4)==="http"?t.replace("http","https"):t}class N{async getFromUrl(e){const i=await(await fetch(e)).text();return this.getInformation(i)}getFromContent(e){return this.getInformation(e)}getInformation(e){try{const n=new window.DOMParser().parseFromString(e,"text/xml");return this.parseFile(n)}catch(n){throw console.error("Could not fetch vast file",n),n}}parseFile(e){return{clickThroughUrl:this.queryXMLFile(e,"ClickThrough"),beacons:{adFirstQuartile:this.queryXMLFile(e,"Tracking[event='firstQuartile']"),adMidpoint:this.queryXMLFile(e,"Tracking[event='midpoint']"),adThirdQuartile:this.queryXMLFile(e,"Tracking[event='thirdQuartile']"),adCompleted:this.queryXMLFile(e,"Tracking[event='complete']"),mute:this.queryXMLFile(e,"Tracking[event='mute']"),unmute:this.queryXMLFile(e,"Tracking[event='unmute']"),pause:this.queryXMLFile(e,"Tracking[event='pause']"),resume:this.queryXMLFile(e,"Tracking[event='resume']"),impression:this.queryXMLFile(e,"Impression"),adStarted:this.queryXMLFile(e,"Tracking[event='start']"),clickThrough:this.queryXMLFile(e,"ClickTracking"),verificationNotExecuted:this.queryXMLFile(e,'TrackingEvents Tracking[event="verificationNotExecuted"]')},adVerifications:this.loadAdVerifications(e),mediaFiles:this.queryMediaFiles(e)}}loadAdVerifications(e){let n=e.querySelectorAll("AdVerifications Verification");return n.length?Array.from(n).map(i=>({javascriptResource:this.queryXMLFile(i,"JavaScriptResource"),apiFramework:this.queryXMLAttribute(i.querySelector("JavaScriptResource"),"apiFramework"),vendor:this.queryXMLAttribute(i,"vendor"),verificationParameters:this.queryXMLFile(i,"VerificationParameters")})):[]}queryXMLFile(e,n){var i;return(i=e.querySelector(n))==null?void 0:i.firstChild.wholeText.trim()}queryXMLAttribute(e,n){return(e==null?void 0:e.getAttribute(n))??void 0}queryXMLText(e){if(!(!e||!e.firstChild))return e.firstChild.wholeText.trim()}queryMediaFiles(e){const n=e.querySelector("MediaFiles > ClosedCaptionFiles > ClosedCaptionFile"),i=e.querySelectorAll("MediaFile"),o=n?this.queryXMLFile(e,"MediaFiles > ClosedCaptionFiles > ClosedCaptionFile"):void 0,r=n?this.queryXMLAttribute(n,"language"):void 0;return Array.from(i).map(_=>{const l=E(this.queryXMLText(_)),c=this.queryXMLAttribute(_,"width"),u=this.queryXMLAttribute(_,"height"),s=c&&u?parseInt(c)/parseInt(u):void 0,p=o??this.queryXMLFile(_,"ClosedCaptionFiles > ClosedCaptionFile"),d=r??this.queryXMLAttribute(_.querySelector("ClosedCaptionFiles > ClosedCaptionFile"),"language");return{mediaUrl:l,width:c,height:u,aspectRatio:s,closedCaptionFile:p,closedCaptionLanguage:d}})}}var z,f,ve,H,me,ye,oe,re,se,_e,B={},ge=[],st=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Z=Array.isArray;function R(t,e){for(var n in e)t[n]=e[n];return t}function be(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ae(t,e,n){var i,o,r,a={};for(r in e)r=="key"?i=e[r]:r=="ref"?o=e[r]:a[r]=e[r];if(arguments.length>2&&(a.children=arguments.length>3?z.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)a[r]===void 0&&(a[r]=t.defaultProps[r]);return J(t,a,i,o,null)}function J(t,e,n,i,o){var r={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++ve,__i:-1,__u:0};return o==null&&f.vnode!=null&&f.vnode(r),r}function I(t){return t.children}function V(t,e){this.props=t,this.context=e}function O(t,e){if(e==null)return t.__?O(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?O(t):null}function Ce(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ce(t)}}function we(t){(!t.__d&&(t.__d=!0)&&H.push(t)&&!K.__r++||me!==f.debounceRendering)&&((me=f.debounceRendering)||ye)(K)}function K(){var t,e,n,i,o,r,a,_;for(H.sort(oe);t=H.shift();)t.__d&&(e=H.length,i=void 0,r=(o=(n=t).__v).__e,a=[],_=[],n.__P&&((i=R({},o)).__v=o.__v+1,f.vnode&&f.vnode(i),ce(n.__P,i,o,n.__n,n.__P.namespaceURI,32&o.__u?[r]:null,a,r??O(o),!!(32&o.__u),_),i.__v=o.__v,i.__.__k[i.__i]=i,Ee(a,i,_),i.__e!=r&&Ce(i)),H.length>e&&H.sort(oe));K.__r=0}function ke(t,e,n,i,o,r,a,_,l,c,u){var s,p,d,v,g,b=i&&i.__k||ge,m=e.length;for(n.__d=l,_t(n,e,b),l=n.__d,s=0;s<m;s++)(d=n.__k[s])!=null&&(p=d.__i===-1?B:b[d.__i]||B,d.__i=s,ce(t,d,p,o,r,a,_,l,c,u),v=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&le(p.ref,null,d),u.push(d.ref,d.__c||v,d)),g==null&&v!=null&&(g=v),65536&d.__u||p.__k===d.__k?l=Fe(d,l,t):typeof d.type=="function"&&d.__d!==void 0?l=d.__d:v&&(l=v.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=l,n.__e=g}function _t(t,e,n){var i,o,r,a,_,l=e.length,c=n.length,u=c,s=0;for(t.__k=[],i=0;i<l;i++)(o=e[i])!=null&&typeof o!="boolean"&&typeof o!="function"?(a=i+s,(o=t.__k[i]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?J(null,o,null,null,null):Z(o)?J(I,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?J(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,r=null,(_=o.__i=at(o,n,a,u))!==-1&&(u--,(r=n[_])&&(r.__u|=131072)),r==null||r.__v===null?(_==-1&&s--,typeof o.type!="function"&&(o.__u|=65536)):_!==a&&(_==a-1?s--:_==a+1?s++:(_>a?s--:s++,o.__u|=65536))):o=t.__k[i]=null;if(u)for(i=0;i<c;i++)(r=n[i])!=null&&!(131072&r.__u)&&(r.__e==t.__d&&(t.__d=O(r)),Me(r,r))}function Fe(t,e,n){var i,o;if(typeof t.type=="function"){for(i=t.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=t,e=Fe(i[o],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=O(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Y(t,e){return e=e||[],t==null||typeof t=="boolean"||(Z(t)?t.some(function(n){Y(n,e)}):e.push(t)),e}function at(t,e,n,i){var o=t.key,r=t.type,a=n-1,_=n+1,l=e[n];if(l===null||l&&o==l.key&&r===l.type&&!(131072&l.__u))return n;if(i>(l!=null&&!(131072&l.__u)?1:0))for(;a>=0||_<e.length;){if(a>=0){if((l=e[a])&&!(131072&l.__u)&&o==l.key&&r===l.type)return a;a--}if(_<e.length){if((l=e[_])&&!(131072&l.__u)&&o==l.key&&r===l.type)return _;_++}}return-1}function Le(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||st.test(e)?n:n+"px"}function G(t,e,n,i,o){var r;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||Le(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||Le(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?i?n.u=i.u:(n.u=re,t.addEventListener(e,r?_e:se,r)):t.removeEventListener(e,r?_e:se,r);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Se(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=re++;else if(e.t<n.u)return;return n(f.event?f.event(e):e)}}}function ce(t,e,n,i,o,r,a,_,l,c){var u,s,p,d,v,g,b,m,y,A,x,L,$,ie,D,j,M=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),r=[_=e.__e=n.__e]),(u=f.__b)&&u(e);e:if(typeof M=="function")try{if(m=e.props,y="prototype"in M&&M.prototype.render,A=(u=M.contextType)&&i[u.__c],x=u?A?A.props.value:u.__:i,n.__c?b=(s=e.__c=n.__c).__=s.__E:(y?e.__c=s=new M(m,x):(e.__c=s=new V(m,x),s.constructor=M,s.render=lt),A&&A.sub(s),s.props=m,s.state||(s.state={}),s.context=x,s.__n=i,p=s.__d=!0,s.__h=[],s._sb=[]),y&&s.__s==null&&(s.__s=s.state),y&&M.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=R({},s.__s)),R(s.__s,M.getDerivedStateFromProps(m,s.__s))),d=s.props,v=s.state,s.__v=e,p)y&&M.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),y&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(y&&M.getDerivedStateFromProps==null&&m!==d&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(m,x),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(m,s.__s,x)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(s.props=m,s.state=s.__s,s.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(X){X&&(X.__=e)}),L=0;L<s._sb.length;L++)s.__h.push(s._sb[L]);s._sb=[],s.__h.length&&a.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(m,s.__s,x),y&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(d,v,g)})}if(s.context=x,s.props=m,s.__P=t,s.__e=!1,$=f.__r,ie=0,y){for(s.state=s.__s,s.__d=!1,$&&$(e),u=s.render(s.props,s.state,s.context),D=0;D<s._sb.length;D++)s.__h.push(s._sb[D]);s._sb=[]}else do s.__d=!1,$&&$(e),u=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++ie<25);s.state=s.__s,s.getChildContext!=null&&(i=R(R({},i),s.getChildContext())),y&&!p&&s.getSnapshotBeforeUpdate!=null&&(g=s.getSnapshotBeforeUpdate(d,v)),ke(t,Z(j=u!=null&&u.type===I&&u.key==null?u.props.children:u)?j:[j],e,n,i,o,r,a,_,l,c),s.base=e.__e,e.__u&=-161,s.__h.length&&a.push(s),b&&(s.__E=s.__=null)}catch(X){if(e.__v=null,l||r!=null){for(e.__u|=l?160:32;_&&_.nodeType===8&&_.nextSibling;)_=_.nextSibling;r[r.indexOf(_)]=null,e.__e=_}else e.__e=n.__e,e.__k=n.__k;f.__e(X,e,n)}else r==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=ct(n.__e,e,n,i,o,r,a,l,c);(u=f.diffed)&&u(e)}function Ee(t,e,n){e.__d=void 0;for(var i=0;i<n.length;i++)le(n[i],n[++i],n[++i]);f.__c&&f.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(r){r.call(o)})}catch(r){f.__e(r,o.__v)}})}function ct(t,e,n,i,o,r,a,_,l){var c,u,s,p,d,v,g,b=n.props,m=e.props,y=e.type;if(y==="svg"?o="http://www.w3.org/2000/svg":y==="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((d=r[c])&&"setAttribute"in d==!!y&&(y?d.localName===y:d.nodeType===3)){t=d,r[c]=null;break}}if(t==null){if(y===null)return document.createTextNode(m);t=document.createElementNS(o,y,m.is&&m),_&&(f.__m&&f.__m(e,r),_=!1),r=null}if(y===null)b===m||_&&t.data===m||(t.data=m);else{if(r=r&&z.call(t.childNodes),b=n.props||B,!_&&r!=null)for(b={},c=0;c<t.attributes.length;c++)b[(d=t.attributes[c]).name]=d.value;for(c in b)if(d=b[c],c!="children"){if(c=="dangerouslySetInnerHTML")s=d;else if(!(c in m)){if(c=="value"&&"defaultValue"in m||c=="checked"&&"defaultChecked"in m)continue;G(t,c,null,d,o)}}for(c in m)d=m[c],c=="children"?p=d:c=="dangerouslySetInnerHTML"?u=d:c=="value"?v=d:c=="checked"?g=d:_&&typeof d!="function"||b[c]===d||G(t,c,d,b[c],o);if(u)_||s&&(u.__html===s.__html||u.__html===t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(s&&(t.innerHTML=""),ke(t,Z(p)?p:[p],e,n,i,y==="foreignObject"?"http://www.w3.org/1999/xhtml":o,r,a,r?r[0]:n.__k&&O(n,0),_,l),r!=null)for(c=r.length;c--;)be(r[c]);_||(c="value",y==="progress"&&v==null?t.removeAttribute("value"):v!==void 0&&(v!==t[c]||y==="progress"&&!v||y==="option"&&v!==b[c])&&G(t,c,v,b[c],o),c="checked",g!==void 0&&g!==t[c]&&G(t,c,g,b[c],o))}return t}function le(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(o){f.__e(o,n)}}function Me(t,e,n){var i,o;if(f.unmount&&f.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||le(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){f.__e(r,e)}i.base=i.__P=null}if(i=t.__k)for(o=0;o<i.length;o++)i[o]&&Me(i[o],e,n||typeof t.type!="function");n||be(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function lt(t,e,n){return this.constructor(t,n)}function ut(t,e,n){var i,o,r,a;f.__&&f.__(t,e),o=(i=typeof n=="function")?null:e.__k,r=[],a=[],ce(e,t=(!i&&n||e).__k=ae(I,null,[t]),o||B,B,e.namespaceURI,!i&&n?[n]:o?null:e.firstChild?z.call(e.childNodes):null,r,!i&&n?n:o?o.__e:e.firstChild,i,a),Ee(r,t,a)}z=ge.slice,f={__e:function(t,e,n,i){for(var o,r,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((r=o.constructor)&&r.getDerivedStateFromError!=null&&(o.setState(r.getDerivedStateFromError(t)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,i||{}),a=o.__d),a)return o.__E=o}catch(_){t=_}throw t}},ve=0,V.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=R({},this.state),typeof t=="function"&&(t=t(R({},n),this.props)),t&&R(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),we(this))},V.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),we(this))},V.prototype.render=I,H=[],ye=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,oe=function(t,e){return t.__v.__b-e.__v.__b},K.__r=0,re=0,se=Se(!1),_e=Se(!0);var dt=0;function h(t,e,n,i,o,r){e||(e={});var a,_,l=e;if("ref"in l)for(_ in l={},e)_=="ref"?a=e[_]:l[_]=e[_];var c={type:t,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--dt,__i:-1,__u:0,__source:o,__self:r};if(typeof t=="function"&&(a=t.defaultProps))for(_ in a)l[_]===void 0&&(l[_]=a[_]);return f.vnode&&f.vnode(c),c}var W,C,ue,Te,ee=0,xe=[],k=f,Pe=k.__b,Ve=k.__r,Ae=k.diffed,$e=k.__c,Re=k.unmount,Ue=k.__;function de(t,e){k.__h&&k.__h(C,t,ee||e),ee=0;var n=C.__H||(C.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Q(t){return ee=1,ft(Ie,t)}function ft(t,e,n){var i=de(W++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):Ie(void 0,e),function(_){var l=i.__N?i.__N[0]:i.__[0],c=i.t(l,_);l!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=C,!C.u)){var o=function(_,l,c){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!r||r.call(this,_,l,c);var s=!1;return u.forEach(function(p){if(p.__N){var d=p.__[0];p.__=p.__N,p.__N=void 0,d!==p.__[0]&&(s=!0)}}),!(!s&&i.__c.props===_)&&(!r||r.call(this,_,l,c))};C.u=!0;var r=C.shouldComponentUpdate,a=C.componentWillUpdate;C.componentWillUpdate=function(_,l,c){if(this.__e){var u=r;r=void 0,o(_,l,c),r=u}a&&a.call(this,_,l,c)},C.shouldComponentUpdate=o}return i.__N||i.__}function Ne(t,e){var n=de(W++,3);!k.__s&&qe(n.__H,e)&&(n.__=t,n.i=e,C.__H.__h.push(n))}function fe(t){return ee=5,pt(function(){return{current:t}},[])}function pt(t,e){var n=de(W++,7);return qe(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function ht(){for(var t;t=xe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(te),t.__H.__h.forEach(pe),t.__H.__h=[]}catch(e){t.__H.__h=[],k.__e(e,t.__v)}}k.__b=function(t){C=null,Pe&&Pe(t)},k.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ue&&Ue(t,e)},k.__r=function(t){Ve&&Ve(t),W=0;var e=(C=t.__c).__H;e&&(ue===C?(e.__h=[],C.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(te),e.__h.forEach(pe),e.__h=[],W=0)),ue=C},k.diffed=function(t){Ae&&Ae(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(xe.push(e)!==1&&Te===k.requestAnimationFrame||((Te=k.requestAnimationFrame)||vt)(ht)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),ue=C=null},k.__c=function(t,e){e.some(function(n){try{n.__h.forEach(te),n.__h=n.__h.filter(function(i){return!i.__||pe(i)})}catch(i){e.some(function(o){o.__h&&(o.__h=[])}),e=[],k.__e(i,n.__v)}}),$e&&$e(t,e)},k.unmount=function(t){Re&&Re(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{te(i)}catch(o){e=o}}),n.__H=void 0,e&&k.__e(e,n.__v))};var He=typeof requestAnimationFrame=="function";function vt(t){var e,n=function(){clearTimeout(i),He&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);He&&(e=requestAnimationFrame(n))}function te(t){var e=C,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),C=e}function pe(t){var e=C;t.__c=t.__(),C=e}function qe(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function Ie(t,e){return typeof e=="function"?e(t):e}function mt(t,e){for(var n in e)t[n]=e[n];return t}function Oe(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function De(t,e){this.props=t,this.context=e}(De.prototype=new V).isPureReactComponent=!0,De.prototype.shouldComponentUpdate=function(t,e){return Oe(this.props,t)||Oe(this.state,e)};var Xe=f.__b;f.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),Xe&&Xe(t)};var yt=f.__e;f.__e=function(t,e,n,i){if(t.then){for(var o,r=e;r=r.__;)if((o=r.__c)&&o.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),o.__c(t,e)}yt(t,e,n,i)};var Be=f.unmount;function We(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),t.__c.__H=null),(t=mt({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(i){return We(i,e,n)})),t}function Qe(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(i){return Qe(i,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function he(){this.__u=0,this.t=null,this.__b=null}function je(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function ne(){this.u=null,this.o=null}f.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Be&&Be(t)},(he.prototype=new V).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var o=je(i.__v),r=!1,a=function(){r||(r=!0,n.__R=null,o?o(_):_())};n.__R=a;var _=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=Qe(l,l.__c.__P,l.__c.__O)}var c;for(i.setState({__a:i.__b=null});c=i.t.pop();)c.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(a,a)},he.prototype.componentWillUnmount=function(){this.t=[]},he.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=We(this.__b,n,i.__O=i.__P)}this.__b=null}var o=e.__a&&ae(I,null,t.fallback);return o&&(o.__u&=-33),[ae(I,null,e.__a?null:t.children),o]};var ze=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(ne.prototype=new V).__a=function(t){var e=this,n=je(e.__v),i=e.o.get(t);return i[0]++,function(o){var r=function(){e.props.revealOrder?(i.push(o),ze(e,t,i)):o()};n?n(r):r()}},ne.prototype.render=function(t){this.u=null,this.o=new Map;var e=Y(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},ne.prototype.componentDidUpdate=ne.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){ze(t,n,e)})};var gt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,bt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ct=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,wt=/[A-Z0-9]/g,kt=typeof document<"u",Ft=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};V.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(V.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Ze=f.event;function Lt(){}function St(){return this.cancelBubble}function Et(){return this.defaultPrevented}f.event=function(t){return Ze&&(t=Ze(t)),t.persist=Lt,t.isPropagationStopped=St,t.isDefaultPrevented=Et,t.nativeEvent=t};var Mt={enumerable:!1,configurable:!0,get:function(){return this.class}},Je=f.vnode;f.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,i=e.type,o={},r=i.indexOf("-")===-1;for(var a in n){var _=n[a];if(!(a==="value"&&"defaultValue"in n&&_==null||kt&&a==="children"&&i==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&_===!0?_="":l==="translate"&&_==="no"?_=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?a="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||Ft(n.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":Ct.test(a)&&(a=l):l=a="oninput":r&&bt.test(a)?a=a.replace(wt,"-$&").toLowerCase():_===null&&(_=void 0),l==="oninput"&&o[a=l]&&(a="oninputCapture"),o[a]=_}}i=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=Y(n.children).forEach(function(c){c.props.selected=o.value.indexOf(c.props.value)!=-1})),i=="select"&&o.defaultValue!=null&&(o.value=Y(n.children).forEach(function(c){c.props.selected=o.multiple?o.defaultValue.indexOf(c.props.value)!=-1:o.defaultValue==c.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",Mt)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),e.props=o}(t),t.$$typeof=gt,Je&&Je(t)};var Ke=f.__r;f.__r=function(t){Ke&&Ke(t),t.__c};var Ye=f.diffed;f.diffed=function(t){Ye&&Ye(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};function Tt(){return h("svg",{class:"cc-icon",viewBox:"0 0 24 24",width:"16",height:"16",children:h("text",{x:"50%",y:"58%","font-size":"16",fill:"currentColor","dominant-baseline":"middle","text-anchor":"middle",children:"CC"})})}function xt(){return h("svg",{viewBox:"0 0 24 24",children:h("path",{fill:"currentColor",d:"M5,9V15H9L14,20V4L9,9M18.5,12C18.5,10.23 17.5,8.71 16,7.97V16C17.5,15.29 18.5,13.76 18.5,12Z"})})}function Pt(){return h("svg",{viewBox:"0 0 24 24",children:h("path",{fill:"currentColor",d:"M12,4L9.91,6.09L12,8.18M4.27,3L3,4.27L7.73,9H3V15H7L12,20V13.27L16.25,17.53C15.58,18.04 14.83,18.46 14,18.7V20.77C15.38,20.45 16.63,19.82 17.68,18.96L19.73,21L21,19.73L12,10.73M19,12C19,12.94 18.8,13.82 18.46,14.64L19.97,16.15C20.62,14.91 21,13.5 21,12C21,7.72 18,4.14 14,3.23V5.29C16.89,6.15 19,8.83 19,12M16.5,12C16.5,10.23 15.5,8.71 14,7.97V10.18L16.45,12.63C16.5,12.43 16.5,12.21 16.5,12Z"})})}function Vt(){return h("svg",{viewBox:"0 0 24 24",children:h("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"})})}function At(){return h("svg",{viewBox:"0 0 24 24",children:h("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"})})}function $t({onClickMute:t,onClickPlayPause:e,isMuted:n,isPlaying:i,ccButtonLabel:o,onClickCcButton:r,isCcActive:a}){return h("div",{class:"rm-video-controls-container",children:h("div",{class:"controls",children:[h("div",{class:"play-pause-container",children:h("button",{class:"play-pause-btn",onClick:e,"data-testid":"play-button","aria-label":i?"Pause":"Play",children:i?h(Vt,{}):h(At,{})})}),h("div",{class:"volume-container",children:h("button",{class:"mute-btn",onClick:t,"data-testid":"mute-button","aria-label":n?"Unmute":"Mute",children:n?h(xt,{}):h(Pt,{})})}),h("div",{class:"cc-container",children:h("button",{class:`cc-btn ${a?"active":"disabled"}`,onClick:r,"aria-label":o||"Closed Captions Button",children:h(Tt,{})})})]})})}function Rt({fallbackImage:t,optionalVideoRedirectUrl:e,optionalRedirectTarget:n}){return h("a",{href:e,target:n,children:h("img",{class:"rm-video-fallback-image",src:t})})}class Ge{constructor(e,n){q(this,"currentLoop",1);q(this,"adStartedSent",!1);q(this,"adFirstQuartileSent",!1);q(this,"adMidpointSent",!1);q(this,"adThirdQuartileSent",!1);q(this,"adCompletedSent",!1);this.vastInformation=e,this.mediaEvents=n}setTime(e,n,i){const o=e/n*100;this.currentLoop==1&&(o>=.01&&!this.adStartedSent&&this.sendAdStarted(n,i),o>=25&&!this.adFirstQuartileSent&&this.sendFirstQuartile(),o>=50&&!this.adMidpointSent&&this.sendMidpoint(),o>=75&&!this.adThirdQuartileSent&&this.sendThirdQuartile())}loop(){this.currentLoop===1&&(T(this.vastInformation.beacons.adCompleted),this.mediaEvents&&this.mediaEvents.complete(),this.adCompletedSent=!0),this.currentLoop++}pause(){T(this.vastInformation.beacons.pause),this.mediaEvents&&this.mediaEvents.pause()}play(){T(this.vastInformation.beacons.resume),this.mediaEvents&&this.mediaEvents.resume()}mute(){T(this.vastInformation.beacons.mute),this.mediaEvents&&this.mediaEvents.volumeChange(0)}unmute(e){T(this.vastInformation.beacons.unmute),this.mediaEvents&&this.mediaEvents.volumeChange(e)}bufferStart(){this.mediaEvents&&this.mediaEvents.bufferStart()}bufferFinish(){this.mediaEvents&&this.mediaEvents.bufferFinish()}sendAdStarted(e,n){T(this.vastInformation.beacons.adStarted),this.mediaEvents&&this.mediaEvents.start(e,n),this.adStartedSent=!0}sendFirstQuartile(){T(this.vastInformation.beacons.adFirstQuartile),this.mediaEvents&&this.mediaEvents.firstQuartile(),this.adFirstQuartileSent=!0}sendMidpoint(){T(this.vastInformation.beacons.adMidpoint),this.mediaEvents&&this.mediaEvents.midpoint(),this.adMidpointSent=!0}sendThirdQuartile(){T(this.vastInformation.beacons.adThirdQuartile),this.mediaEvents&&this.mediaEvents.thirdQuartile(),this.adThirdQuartileSent=!0}}const T=t=>{if(t!==void 0)try{const e=new URL(t);navigator.sendBeacon(e)}catch(e){console.error("Could not send beacon",e)}};async function Ut(t){if(t.adVerifications.length<1)return console.log("No ad verifications found"),null;window.OmidSessionClient&&window.OmidSessionClient.default&&await Nt();const e=window.OmidSessionClient.default,n=e.AdSession,i=e.Partner,o=e.Context,r=e.VerificationScriptResource,a=e.MediaEvents,_=e.AdEvents,l=window.location.href,c="criteo",u=Object.keys(window.OmidSessionClient)[0],s=new i(c,u),p=window.top,d=[];for(const L of t.adVerifications){if(L.apiFramework!="omid"){if(console.log("detected non-omid compatible script, skipping load, attempting to fire verificationNotExecuted"),!t.beacons.verificationNotExecuted){console.log("Failed to load verificationNotExecuted beacon");continue}T(t.beacons.verificationNotExecuted),console.log(t.beacons.verificationNotExecuted,"verificationNotExecuted beacon dropped");continue}d.push(new r(L.javascriptResource,L.vendor,L.verificationParameters,"full"))}if(d.length<1)return console.log("no valid verification tags detected"),null;const v=new o(s,d,l);v.setServiceWindow(p);const g=new n(v);if(g.setCreativeType("video"),g.setImpressionType("beginToRender"),!g.isSupported())return console.log("This AdSession is not supported"),null;const b=new _(g),m=e.VastProperties,y=new a(g);return g.start(),{onAdLoaded:()=>{g.registerSessionObserver(L=>{if(L.type==="sessionStart"){const $=new m(!1,0,!0,"standalone");b.loaded($),b.impressionOccurred(),console.log("OMID AdEvent loaded and impression occurred")}})},mediaEvents:y,setVideoContext:L=>{v.setVideoElement(L)}}}async function Nt(){try{await et("https://static.criteo.net/banners/js/omidjs/stable/omid-session-client-v1.js"),await et("https://static.criteo.net/banners/js/omidjs/stable/omweb-v1.js")}catch(t){console.error(t)}}function et(t){return new Promise((e,n)=>{const i=document.createElement("script");i.src=t,i.onload=()=>e(),i.onerror=()=>n(new Error(`Failed to load script ${t}`)),document.head.appendChild(i)})}function Ht(t){const{mediaFiles:e,targetDimensions:n}=t;let i;const o={mediaUrl:void 0,closedCaptionFile:void 0,closedCaptionLanguage:void 0};if(e.length===0)return o;if(n&&(i=n.width/n.height),e.length===1||e.length>1&&(!n||!i||e.every(_=>_.aspectRatio===void 0))){const _=e[0];return o.mediaUrl=_.mediaUrl,o.closedCaptionFile=_.closedCaptionFile||void 0,o.closedCaptionLanguage=_.closedCaptionLanguage||"",o}e.sort((_,l)=>{const c=_.aspectRatio??0,u=l.aspectRatio??0;return c-u});let r=null,a=1/0;for(const _ of e){let l=1/0;if(typeof _.aspectRatio=="number"&&typeof i=="number"&&(l=Math.abs(_.aspectRatio-i)),l<a&&(a=l,r=_),r&&r.mediaUrl!==_.mediaUrl&&r.aspectRatio===_.aspectRatio){const c=n==null?void 0:n.width,u=n==null?void 0:n.height,s=tt(c,_.width),p=nt(u,_.height),d=tt(c,r.width),v=nt(u,r.height),g=s+p,b=d+v;g<b&&(r=_)}}return o.mediaUrl=r==null?void 0:r.mediaUrl,o.closedCaptionFile=(r==null?void 0:r.closedCaptionFile)||void 0,o.closedCaptionLanguage=(r==null?void 0:r.closedCaptionLanguage)||"",o}function tt(t,e){const n=typeof e=="string"?parseFloat(e):e;return typeof t=="number"&&typeof n=="number"?Math.abs(t-n):1/0}function nt(t,e){const n=typeof e=="string"?parseFloat(e):e;return typeof t=="number"&&typeof n=="number"?Math.abs(t-n):1/0}function it(t){const e=t instanceof HTMLTrackElement?t.track:t,n=e==null?void 0:e.activeCues;if(n&&n.length>0){const i=n[0];if("text"in i&&typeof i.text=="string")return i.text}return""}function qt({closedCaptionFile:t,closedCaptionLanguage:e,setCcContent:n}){const i=fe(null),o=()=>{var _;const a=(_=i.current)==null?void 0:_.track;a&&(a.mode="hidden")},r=()=>{n(i.current?it(i.current):null)};return Ne(()=>{var _;o();const a=()=>{var c;o();const l=(c=i.current)==null?void 0:c.track;l==null||l.addEventListener("cuechange",r)};return(_=i.current)==null||_.addEventListener("load",a),()=>{var l;(l=i.current)==null||l.removeEventListener("load",a)}},[]),h("track",{ref:i,kind:"subtitles",src:t,srclang:e||"en",label:(e||"").toUpperCase(),default:!0})}function It({isCcActive:t,content:e}){return h("div",{class:`custom-subtitle-container ${t?"active":"disabled"}`,children:e})}function Ot(t){const{vastInformation:e,options:n}=t,{mediaFiles:i}=e,{fallbackImage:o,altText:r,maxVolume:a,targetDimensions:_,ccButtonLabel:l}=n,c=Ht({mediaFiles:i,targetDimensions:_}),u=fe(null),s=fe(null),[p,d]=Q(!0),[v,g]=Q(!1),[b,m]=Q(!1),[y,A]=Q(!0),[x,L]=Q(null),$=()=>{var w,F;p?(w=s.current)==null||w.mute():(F=s.current)==null||F.unmute(a||1),d(!p)},ie=w=>{var P,U;b&&(m(!1),(P=s.current)==null||P.bufferFinish());const F=w.target;(U=s.current)==null||U.setTime(F.currentTime,F.duration,F.volume)},D=()=>{var w,F;(w=s.current)==null||w.loop(),(F=u.current)==null||F.play()},j=()=>{e.clickThroughUrl?(T(e.beacons.clickThrough),window.open(e.clickThroughUrl,"_self")):(v?u.current.pause():u.current.play(),g(!v))},M=()=>{new IntersectionObserver(F=>{for(let P=0;P<F.length;P++){let rt=F[P].isIntersecting;rt&&!v?(u.current.play(),g(!0)):!rt&&v&&(u.current.pause(),g(!1))}},{threshold:.5}).observe(u.current)},X=async()=>{const w=await Ut(e);if(w===null){s.current=new Ge(e,null);return}const{onAdLoaded:F,setVideoContext:P,mediaEvents:U}=w;s.current=new Ge(e,U),P(u.current),u.current.addEventListener("canplay",F,{once:!0})};Ne(()=>{async function w(){await X(),M(),jt()}w()},[]);const Bt=()=>{var w,F;v?(u.current.pause(),(w=s.current)==null||w.pause()):(u.current.play(),(F=s.current)==null||F.play()),g(!v)},Wt=()=>{var w;m(!0),(w=s.current)==null||w.bufferStart()},Qt=w=>{var P,U;w.preventDefault(),A(!y);const F=(U=(P=u.current)==null?void 0:P.textTracks)==null?void 0:U[0];L(it(F))},jt=()=>{A(!!c.closedCaptionFile)};return h("div",{class:"rm-video-player-container",children:[h("video",{ref:u,class:"rm-ad-player",muted:p,playsInline:!0,"webkit-playsInline":!0,disablePictureInPicture:!0,"aria-label":r,src:c.mediaUrl,onTimeUpdate:ie,onEnded:D,onClick:j,onWaiting:Wt,"data-testid":"video-element",volume:a,children:[(o==null?void 0:o.src)&&(o==null?void 0:o.optionalVideoRedirectUrl)&&(o==null?void 0:o.optionalRedirectTarget)&&h(Rt,{fallbackImage:o==null?void 0:o.src,optionalVideoRedirectUrl:o==null?void 0:o.optionalVideoRedirectUrl,optionalRedirectTarget:o==null?void 0:o.optionalRedirectTarget}),h(qt,{closedCaptionFile:c.closedCaptionFile,closedCaptionLanguage:c.closedCaptionLanguage,setCcContent:L})]}),h($t,{onClickPlayPause:Bt,onClickMute:$,isMuted:p,isPlaying:v,ccButtonLabel:l,onClickCcButton:Qt,isCcActive:y}),h(It,{isCcActive:y,content:x})]})}const ot=async(t,e,n)=>{ut(h(Ot,{options:n,vastInformation:t}),document.getElementById(e))},Dt=async(t,e,n)=>{const o=await new N().getFromUrl(t);return ot(o,e,n)},Xt=async(t,e,n)=>{const o=await new N().getFromContent(t);return ot(o,e,n)};S.criteoVideoPlayerFromContent=Xt,S.criteoVideoPlayerFromUrl=Dt,Object.defineProperty(S,Symbol.toStringTag,{value:"Module"})});
